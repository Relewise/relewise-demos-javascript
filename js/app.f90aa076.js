(function(){"use strict";var e={2948:function(e,t,a){var r=a(9242),n=(a(7658),a(3396)),o=a(7139),s=a(4870),i=a(1107),l=a(3905);const u={key:0,class:"mb-5 border-l-4 border-solid p-5 border-red-500 bg-red-100"},c={key:0},d=(0,n._)("h3",null,"No dataset is configured.",-1),p=[d],m={key:1},h=(0,n._)("h3",null,"Invalid configuration of dataset. Please provide dataset id and api key.",-1),g=[h],f={key:2},y=(0,n._)("h3",null,"Api Key is invalid or missing access",-1),v=[y],b={key:3},w=(0,n._)("h3",null,"Dataset does not exist",-1),S=[w];var x=(0,n.aZ)({__name:"ApiError",setup(e){const t=(0,n.Fl)((()=>a.value&&(r.value||o.value||d.value||h.value))),a=(0,n.Fl)((()=>"settings"!==l.Z.currentRoute.value.name)),r=(0,n.Fl)((()=>i.Z.datasets.value.length<=0)),o=(0,n.Fl)((()=>!i.Z.context.value.apiKey||!i.Z.context.value.datasetId)),d=i.Z.datasetIdError,h=i.Z.apiKeyError;return(e,a)=>(0,s.SU)(t)?((0,n.wg)(),(0,n.iD)("div",u,[(0,s.SU)(r)?((0,n.wg)(),(0,n.iD)("div",c,p)):(0,n.kq)("",!0),(0,s.SU)(o)?((0,n.wg)(),(0,n.iD)("div",m,g)):(0,n.kq)("",!0),(0,s.SU)(h)?((0,n.wg)(),(0,n.iD)("div",f,v)):(0,n.kq)("",!0),(0,s.SU)(d)?((0,n.wg)(),(0,n.iD)("div",b,S)):(0,n.kq)("",!0)])):(0,n.WI)(e.$slots,"default",{key:1})}});const I=x;var _=I;const k={class:"w-[400px] border-r border-solid border-gray-300"},U={class:"mb-4"},P=(0,n._)("h2",{class:"text-3xl font-bold"},"Relewise demo",-1),D={class:"text-sm inline-block text-brand-500 rounded-full py-1 px-3 bg-gray-200"},C={class:"group__header"},K={class:"border-t border-b border-solid border-gray-300 py-2 mt-4"},E=(0,n._)("label",{class:"text-sm"},"AuthenticatedId",-1),N=(0,n._)("label",{class:"text-sm"},"TemporaryId",-1),Z={class:"w-5/6 p-5"};var O=(0,n.aZ)({__name:"App",setup(e){const t=i.Z.context,a=i.Z.impersonation,u=(0,n.Fl)((()=>l.Z.getRoutes().reduce(((e,t)=>{const a=t.meta.navigationGroup;if(!a)return e;const r=e[a];return r||(e[a]=[]),e[a].push(t),e}),{})));return(e,i)=>{const l=(0,n.up)("router-link"),c=(0,n.up)("RouterView");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("nav",k,[(0,n._)("div",U,[P,(0,n._)("h4",D,[(0,n.Uk)("Dataset: "),(0,n._)("strong",null,(0,o.zw)((0,s.SU)(t).displayName??"(not set)"),1)])]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,s.SU)(u),((e,t)=>((0,n.wg)(),(0,n.iD)("div",{key:t,class:"mt-3"},[(0,n._)("div",C,(0,o.zw)(t),1),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e,(e=>((0,n.wg)(),(0,n.j4)(l,{to:e.path,key:e.name},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(e.meta.title),1)])),_:2},1032,["to"])))),128))])))),128)),(0,n._)("div",K,[E,(0,n.wy)((0,n._)("input",{type:"text",class:"mb-3","onUpdate:modelValue":i[0]||(i[0]=e=>(0,s.SU)(a).authenticatedId=e)},null,512),[[r.nr,(0,s.SU)(a).authenticatedId]]),N,(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":i[1]||(i[1]=e=>(0,s.SU)(a).temporaryId=e),class:"mb-3"},null,512),[[r.nr,(0,s.SU)(a).temporaryId]])]),(0,n.Wm)(l,{to:"/",class:"ml-0 mt-4"},{default:(0,n.w5)((()=>[(0,n.Uk)("Settings")])),_:1})]),(0,n._)("div",Z,[(0,n.Wm)(_,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c)])),_:1})])],64)}}});const A=O;var T=A;const j={install:e=>{e.config.globalProperties.$format=e=>{if(!e)return"";try{return new Intl.NumberFormat(i.Z.context.value.language,{style:"currency",currency:i.Z.context.value.currencyCode}).format(e)}catch{return console.warn(`Could not format price using the currency: '${i.Z.context.value.currencyCode}'`),""}}}};(0,r.ri)(T).use(l.Z).use(j).mount("#app")},3905:function(e,t,a){a.d(t,{Z:function(){return E}});var r=a(2483),n=(a(2801),a(3396)),o=a(4870),s=a(7139),i=a(9242),l=a(1107);const u={class:"home"},c=(0,n._)("h1",{class:"mb-8"},"Settings",-1),d=(0,n._)("label",{class:"text-sm block"},"Select dataset",-1),p=["value"],m=["value"],h=(0,n._)("hr",{class:"mb-6"},null,-1),g=(0,n._)("label",{class:"text-sm block"},"Name",-1),f=(0,n._)("label",{class:"text-sm block mt-6"},"Dataset Id",-1),y=(0,n._)("label",{class:"text-sm block mt-6"},"API Key",-1),v=(0,n._)("label",{class:"text-sm block mt-6"},"Language",-1),b=(0,n._)("label",{class:"text-sm block mt-6"},"Currency",-1),w=(0,n._)("label",{class:"text-sm block mt-6"},"Image Url Data Key Name",-1),S={class:"mt-4"},x={key:0,class:"ml-4 text-green-600"},I={class:"mt-4"},_={key:0,class:"ml-4 text-green-600"};var k=(0,n.aZ)({__name:"Settings",setup(e){const t=(0,o.iH)(!1),a=(0,o.iH)(!1),r=l.Z.context,k=l.Z.datasets;function U(){const e=new URLSearchParams(window.location.search);if(e.has("share")){const t=atob(e.get("share")),a=JSON.parse(t);l.Z.addDataset(a),l.Z.persistState();const r=new URL(window.location.href);r.searchParams.delete("share"),history.replaceState(null,"",r)}}function P(e){l.Z.setDataset(e)}function D(){l.Z.persistState(),t.value=!0,setTimeout((()=>t.value=!1),3e3)}function C(){l.Z.addDataset({displayName:"",apiKey:"",datasetId:"",currencyCode:"",language:""}),l.Z.setDataset("")}function K(){const e={displayName:r.value.displayName,apiKey:r.value.apiKey,datasetId:r.value.datasetId,currencyCode:r.value.currencyCode,language:r.value.language,imageUrlDataKey:r.value.imageUrlDataKey};navigator.clipboard.writeText(window.location.href+"?share="+btoa(JSON.stringify(e))),a.value=!0,setTimeout((()=>a.value=!1),3e3)}return U(),(e,l)=>((0,n.wg)(),(0,n.iD)("div",u,[c,(0,o.SU)(k).length>1?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[d,(0,n._)("select",{value:(0,o.SU)(r).datasetId,class:"mb-6",onChange:l[0]||(l[0]=e=>P(e.target.value))},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,o.SU)(k),(e=>((0,n.wg)(),(0,n.iD)("option",{value:e.datasetId,key:e.datasetId},(0,s.zw)(e.displayName)+" ("+(0,s.zw)(e.datasetId)+") ",9,m)))),128))],40,p),h],64)):(0,n.kq)("",!0),g,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":l[1]||(l[1]=e=>(0,o.SU)(r).displayName=e),type:"text",placeholder:"Name"},null,512),[[i.nr,(0,o.SU)(r).displayName]]),f,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":l[2]||(l[2]=e=>(0,o.SU)(r).datasetId=e),type:"text",placeholder:"Dataset id"},null,512),[[i.nr,(0,o.SU)(r).datasetId]]),y,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>(0,o.SU)(r).apiKey=e),type:"text",placeholder:"Api key"},null,512),[[i.nr,(0,o.SU)(r).apiKey]]),v,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":l[4]||(l[4]=e=>(0,o.SU)(r).language=e),type:"text",placeholder:"LanguageCode"},null,512),[[i.nr,(0,o.SU)(r).language]]),b,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":l[5]||(l[5]=e=>(0,o.SU)(r).currencyCode=e),type:"text",placeholder:"CurrencyCode"},null,512),[[i.nr,(0,o.SU)(r).currencyCode]]),w,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":l[6]||(l[6]=e=>(0,o.SU)(r).imageUrlDataKey=e),type:"text",placeholder:"Image Url Data Key Name"},null,512),[[i.nr,(0,o.SU)(r).imageUrlDataKey]]),(0,n._)("div",S,[(0,n._)("button",{class:"px-6 py-2 font-semibold text-sm bg-brand-500 text-white rounded-full shadow-sm",onClick:D},"Save"),t.value?((0,n.wg)(),(0,n.iD)("span",x," Settings have been saved. ")):(0,n.kq)("",!0)]),(0,n._)("div",I,[(0,n._)("button",{class:"px-6 py-2 font-semibold text-sm bg-gray-500 text-white rounded-full shadow-sm mr-4",onClick:C},"Add new dataset"),(0,n._)("button",{class:"px-6 py-2 font-semibold text-sm bg-gray-500 text-white rounded-full shadow-sm",onClick:K},"Get share link"),a.value?((0,n.wg)(),(0,n.iD)("span",_," Copied! ")):(0,n.kq)("",!0)])]))}});const U=k;var P=U;function D(e){window.document.title=`${e} | Relewise`}const C=[{path:"/search",name:"search",component:()=>Promise.all([a.e(771),a.e(446)]).then(a.bind(a,20)),meta:{title:"Product Search",navigationGroup:"Search"}},{path:"/category",name:"products-in-category",component:()=>a.e(224).then(a.bind(a,2461)),meta:{title:"Products In Category",navigationGroup:"Search"}},{path:"/product",name:"product",component:()=>a.e(701).then(a.bind(a,1134)),meta:{title:"Purchased With & Viewed After (PDP)",navigationGroup:"Product Recommendations"}},{path:"/popular-brands",name:"popular-brands",component:()=>a.e(878).then(a.bind(a,3897)),meta:{title:"Popular Brands",navigationGroup:"Brand Recommendations"}},{path:"/popular-products",name:"popular-products",component:()=>a.e(783).then(a.bind(a,4924)),meta:{title:"Popular Products",navigationGroup:"Product Recommendations"}},{path:"/personal-products",name:"personal-products",component:()=>Promise.all([a.e(771),a.e(694)]).then(a.bind(a,4413)),meta:{title:"Personal Products",navigationGroup:"Product Recommendations"}},{path:"/popular-categories",name:"popular-categories",component:()=>a.e(783).then(a.bind(a,474)),meta:{title:"Popular Categories",navigationGroup:"Category Recommendations"}},{path:"/search-term-based",name:"search-term-based",component:()=>a.e(945).then(a.bind(a,6848)),meta:{title:"Search Term Based",navigationGroup:"Product Recommendations"}},{path:"/popular-search-terms",name:"popular-search-terms",component:()=>a.e(757).then(a.bind(a,9417)),meta:{title:"Popular Search Terms",navigationGroup:"Search"}},{path:"/",name:"settings",component:P,meta:{title:"Settings"}}],K=(0,r.p7)({history:(0,r.PO)("/relewise-demos-javascript/"),routes:C});K.beforeEach((e=>{D(e?.meta?.title??"")}));var E=K},1107:function(e,t,a){var r=a(7327),n=(a(7658),a(3791)),o=a(4870),s=a(3396);class i{constructor(){(0,r.Z)(this,"localStorageName","appContextV2"),(0,r.Z)(this,"state",(0,o.qj)({datasets:[{datasetId:"",apiKey:"",language:"",currencyCode:""}],selectedDatasetIndex:0,impersonation:{}})),(0,r.Z)(this,"errorState",(0,o.qj)({datasetIdError:!1,apiKeyError:!1}));const e=localStorage.getItem(this.localStorageName);e&&Object.assign(this.state,JSON.parse(e))}get context(){return(0,s.Fl)((()=>this.state.datasets[this.state.selectedDatasetIndex]))}get datasets(){return(0,s.Fl)((()=>this.state.datasets))}get impersonation(){return(0,s.Fl)((()=>this.state.impersonation))}get apiKeyError(){return(0,s.Fl)((()=>this.errorState.apiKeyError))}get datasetIdError(){return(0,s.Fl)((()=>this.errorState.datasetIdError))}get defaultSettings(){if(this.state.selectedDatasetIndex<-1)throw new Error("Missing language or currencycode");return{language:this.context.value.language,currency:this.context.value.currencyCode,displayedAtLocation:"Relewise Demo App",user:this.getUser()}}get selectedProductProperties(){return{displayName:!0,allData:!0,brand:!0,categoryPaths:!0,pricing:!0}}getSearcher(){if(!this.context.value.apiKey||!this.context.value.datasetId)throw new Error("Missing apiKey or datasetId");return new n.Searcher(this.context.value.datasetId,this.context.value.apiKey)}getRecommender(){if(!this.context.value.apiKey||!this.context.value.datasetId)throw new Error("Missing apiKey or datasetId");return new n.Recommender(this.context.value.datasetId,this.context.value.apiKey)}persistState(){this.errorState.apiKeyError=!1,this.errorState.datasetIdError=!1,localStorage.setItem(this.localStorageName,JSON.stringify(this.state))}isConfigured(){return this.context.value.datasetId&&this.context.value.apiKey&&this.context.value.currencyCode&&this.context.value.language}addClassification(){this.state.classifications||(this.state.classifications=[]),this.state.classifications.push({value:"",key:""}),this.persistState()}addDataset(e){localStorage.getItem(this.localStorageName)||(this.state.datasets=[]),this.state.datasets.push(e),this.setDataset(e.datasetId)}setDataset(e){this.impersonation.value.authenticatedId=void 0,this.impersonation.value.temporaryId=void 0,this.state.selectedDatasetIndex=this.state.datasets.map((e=>e.datasetId)).indexOf(e),this.persistState()}assertApiCall(e){401===e.status?(this.errorState.datasetIdError=!1,this.errorState.apiKeyError=!0):404===e.status?(this.errorState.datasetIdError=!0,this.errorState.apiKeyError=!1):(this.errorState.datasetIdError=!1,this.errorState.apiKeyError=!1)}getUser(){if(this.state.impersonation.authenticatedId&&""!==this.state.impersonation.authenticatedId)return n.UserFactory.byTemporaryId(this.state.impersonation.authenticatedId);if(this.state.impersonation.temporaryId&&""!==this.state.impersonation.temporaryId)return n.UserFactory.byTemporaryId(this.state.impersonation.temporaryId);const e=n.UserFactory.anonymous();return this.state.classifications&&(e.classifications=this.state.classifications.reduce(((e,t)=>(e[t.key]=t.value,e)),{})),e}}t["Z"]=new i}},t={};function a(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,r,n,o){if(!r){var s=1/0;for(c=0;c<e.length;c++){r=e[c][0],n=e[c][1],o=e[c][2];for(var i=!0,l=0;l<r.length;l++)(!1&o||s>=o)&&Object.keys(a.O).every((function(e){return a.O[e](r[l])}))?r.splice(l--,1):(i=!1,o<s&&(s=o));if(i){e.splice(c--,1);var u=n();void 0!==u&&(t=u)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[r,n,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,r){return a.f[r](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/"+({224:"ProductsInCategorySearch",446:"ProductSearch",694:"PersonalProducts",701:"ProductDetails",757:"PopularSearchTerms",783:"PopularProducts",878:"PopularBrands",945:"SearchTermBased"}[e]||e)+"."+{224:"3b9a30dd",446:"4e30642a",694:"e7409122",701:"5f299fcc",757:"68607631",771:"fe23d421",783:"d23f2e80",878:"7c290e24",945:"5c1909a1"}[e]+".js"}}(),function(){a.miniCssF=function(e){return"css/"+{224:"ProductsInCategorySearch",446:"ProductSearch",694:"PersonalProducts",701:"ProductDetails",783:"PopularProducts",945:"SearchTermBased"}[e]+"."+{224:"acfb1889",446:"acfb1889",694:"acfb1889",701:"acfb1889",783:"acfb1889",945:"acfb1889"}[e]+".css"}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="relewise-demo:";a.l=function(r,n,o,s){if(e[r])e[r].push(n);else{var i,l;if(void 0!==o)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+o){i=d;break}}i||(l=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,a.nc&&i.setAttribute("nonce",a.nc),i.setAttribute("data-webpack",t+o),i.src=r),e[r]=[n];var p=function(t,a){i.onerror=i.onload=null,clearTimeout(m);var n=e[r];if(delete e[r],i.parentNode&&i.parentNode.removeChild(i),n&&n.forEach((function(e){return e(a)})),t)return t(a)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=p.bind(null,i.onerror),i.onload=p.bind(null,i.onload),l&&document.head.appendChild(i)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/relewise-demos-javascript/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,a,r,n){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css";var s=function(a){if(o.onerror=o.onload=null,"load"===a.type)r();else{var s=a&&("load"===a.type?"missing":a.type),i=a&&a.target&&a.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=s,l.request=i,o.parentNode.removeChild(o),n(l)}};return o.onerror=o.onload=s,o.href=t,a?a.parentNode.insertBefore(o,a.nextSibling):document.head.appendChild(o),o},t=function(e,t){for(var a=document.getElementsByTagName("link"),r=0;r<a.length;r++){var n=a[r],o=n.getAttribute("data-href")||n.getAttribute("href");if("stylesheet"===n.rel&&(o===e||o===t))return n}var s=document.getElementsByTagName("style");for(r=0;r<s.length;r++){n=s[r],o=n.getAttribute("data-href");if(o===e||o===t)return n}},r=function(r){return new Promise((function(n,o){var s=a.miniCssF(r),i=a.p+s;if(t(s,i))return n();e(r,i,null,n,o)}))},n={143:0};a.f.miniCss=function(e,t){var a={224:1,446:1,694:1,701:1,783:1,945:1};n[e]?t.push(n[e]):0!==n[e]&&a[e]&&t.push(n[e]=r(e).then((function(){n[e]=0}),(function(t){throw delete n[e],t})))}}}(),function(){var e={143:0};a.f.j=function(t,r){var n=a.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var o=new Promise((function(a,r){n=e[t]=[a,r]}));r.push(n[2]=o);var s=a.p+a.u(t),i=new Error,l=function(r){if(a.o(e,t)&&(n=e[t],0!==n&&(e[t]=void 0),n)){var o=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;i.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",i.name="ChunkLoadError",i.type=o,i.request=s,n[1](i)}};a.l(s,l,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,o,s=r[0],i=r[1],l=r[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(l)var c=l(a)}for(t&&t(r);u<s.length;u++)o=s[u],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(c)},r=self["webpackChunkrelewise_demo"]=self["webpackChunkrelewise_demo"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(2948)}));r=a.O(r)})();
//# sourceMappingURL=app.f90aa076.js.map