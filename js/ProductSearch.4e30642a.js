"use strict";(self["webpackChunkrelewise_demo"]=self["webpackChunkrelewise_demo"]||[]).push([[446],{20:function(e,t,l){l.r(t),l.d(t,{default:function(){return P}});var r=l(3396),a=l(4870),s=l(9242),n=l(7139),u=l(3791),i=l(1471),o=l(1107);function d(e,t){const l=(0,a.iH)(0);function s(r){const a=r.code??r.key;e.value.length<=1&&"Enter"!==a?l.value=0:"ArrowDown"===a?l.value=l.value===e.value.length-1?0:l.value+1:"ArrowUp"===a?l.value=0===l.value?e.value.length-1:l.value-1:"Enter"===a&&t(e.value[l.value])}function n(){l.value=0}return(0,r.bv)((()=>window.addEventListener("keydown",s))),(0,r.Ah)((()=>window.removeEventListener("keydown",s))),{index:l,reset:n}}var c=l(6413);const v={class:"search"},w={class:"mb-5"},p={key:0,class:"mb-5"},h=(0,r._)("h4",{class:"text-md mb-1"},"Predictions",-1),m=["onClick"],b={key:1,class:"mb-5"},g={class:"text-xl font-semibold mb-2"},f={key:2},k={class:"text-xl font-semibold mb-2"},y={key:3},S={class:"text-xl font-semibold mb-2"};var D=(0,r.aZ)({__name:"ProductSearch",setup(e){const t=(0,a.iH)(null),l=(0,a.iH)(null),D=(0,a.iH)(""),x=(0,a.iH)(""),P=o.Z.getSearcher(),_=(0,a.iH)(l.value?.predictions??[]),{index:z,reset:H}=d(_,(e=>{q(e.term??"")})),C=(0,c.DI)((()=>{x.value!==D.value&&Z()}),200);async function Z(){x.value=D.value;const e=(new u.SearchCollectionBuilder).addRequest(new u.ProductSearchBuilder(o.Z.defaultSettings).setSelectedProductProperties(o.Z.selectedProductProperties).setSelectedVariantProperties({allData:!0,displayName:!0}).setTerm(D.value).pagination((e=>e.setPageSize(30))).build()).addRequest(new u.SearchTermPredictionBuilder(o.Z.defaultSettings).addEntityType("Product").setTerm(D.value).take(5).build()).build(),r=await P.batch(e);o.Z.assertApiCall(r),H(),r&&r.responses&&(t.value=r.responses[0],l.value=r.responses[1],_.value=r.responses[1]?.predictions??[])}function q(e){D.value=e,Z()}return(e,u)=>((0,r.wg)(),(0,r.iD)("div",v,[(0,r._)("div",w,[(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":u[0]||(u[0]=e=>D.value=e),onKeydown:u[1]||(u[1]=(...e)=>(0,a.SU)(C)&&(0,a.SU)(C)(...e)),placeholder:"Search for products"},null,544),[[s.nr,D.value]])]),l.value&&l.value.predictions&&l.value.predictions.length>0?((0,r.wg)(),(0,r.iD)("div",p,[h,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.value.predictions,((e,t)=>((0,r.wg)(),(0,r.iD)("a",{key:e.term??"",onClick:(0,s.iM)((t=>q(e.term??"")),["prevent"]),class:(0,n.C_)(["mb-1 block cursor-pointer",{"font-semibold":t==(0,a.SU)(z)}])},(0,n.zw)(e.term),11,m)))),128))])):(0,r.kq)("",!0),t.value&&t.value?.redirects&&t.value.redirects.length>0?((0,r.wg)(),(0,r.iD)("div",b,[(0,r._)("h2",g,"Showing redirect(s) for '"+(0,n.zw)(x.value)+"'",1),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.value.redirects,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e.id,class:"mb-1 pb-1 flex border-b border-solid border-gray-300"},(0,n.zw)(e.destination),1)))),128))])):(0,r.kq)("",!0),t.value&&t.value?.results&&t.value.results.length>0?((0,r.wg)(),(0,r.iD)("div",f,[(0,r._)("h2",k,"Showing results for '"+(0,n.zw)(x.value)+"' ("+(0,n.zw)(t.value.results.length)+" of "+(0,n.zw)(t.value.hits)+")",1),(0,r.Wm)(i.Z,{products:t.value?.results},null,8,["products"])])):x.value.length>0?((0,r.wg)(),(0,r.iD)("div",y,[(0,r._)("h2",S,"Your search '"+(0,n.zw)(x.value)+"' returned no matching products.",1)])):(0,r.kq)("",!0)]))}});const x=D;var P=x}}]);
//# sourceMappingURL=ProductSearch.4e30642a.js.map